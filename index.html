<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>BÃ¬nh chá»n cáº·p Ä‘Ã´i Táº¿t ğŸ§§</title>

<style>
/* ====== STYLE CHUNG ====== */
body{
    margin:0;
    font-family: Arial, sans-serif;
    background: linear-gradient(#b30000,#ff1a1a);
    color:white;
    text-align:center;
}

h1,h2,h3{
    margin:10px 0;
}

button{
    padding:10px 20px;
    border:none;
    border-radius:8px;
    cursor:pointer;
    background:gold;
    font-weight:bold;
}

input{
    padding:10px;
    border-radius:6px;
    border:none;
    margin:5px;
}

/* ====== MÃ€N NHáº¬P CODE ====== */
#loginBox{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
}

#loginBox p{
    opacity:0.9;
}

/* ====== VIDEO ====== */
#videoBox iframe{
    width:90%;
    max-width:560px;
    height:315px;
    border-radius:12px;
    margin:15px 0;
}

/* ====== TRANG CHÃNH ====== */
#main{
    display:none;
    padding-bottom:50px;
}

.section{
    background:rgba(0,0,0,0.2);
    margin:15px;
    padding:15px;
    border-radius:12px;
}

/* ====== Cáº¶P ÄÃ”I ====== */
.couple{
    background:rgba(255,255,255,0.15);
    margin:10px;
    padding:10px;
    border-radius:10px;
}

/* ====== TOP ====== */
.rank1{color:gold;}
.rank2{color:silver;}
.rank3{color:#cd7f32;}

/* ====== LINK LÃŒ XÃŒ ====== */
#lixiLink{
    color:white;
    font-weight:bold;
    margin-top:30px;
    cursor:pointer;
    text-decoration:underline;
}
</style>
</head>

<body>

<!-- ====== MÃ€N NHáº¬P TÃŠN + CODE ====== -->
<div id="loginBox">
    <h1>ğŸ§§ BÃ¬nh chá»n cáº·p Ä‘Ã´i Táº¿t ğŸ§§</h1>

    <div id="videoBox">
        <iframe src="https://www.youtube.com/embed/nAP-Jk7fgHM?autoplay=1&mute=1"
        allow="autoplay"></iframe>
    </div>

    <input id="nameInput" placeholder="Nháº­p tÃªn cá»§a báº¡n">
    <input id="codeInput" placeholder="Nháº­p code Ä‘á»ƒ vÃ o">
    <p>Code: <b>anhmontongtai</b></p>

    <button onclick="login()">VÃ o trang</button>
</div>

<!-- ====== TRANG CHÃNH ====== -->
<div id="main">
    <h1>ğŸŒ¸ ChÃ o <span id="userName"></span> ğŸŒ¸</h1>

    <!-- Äá»€ XUáº¤T -->
    <div class="section">
        <h2>ğŸ’ Äá» xuáº¥t cáº·p Ä‘Ã´i (tá»‘i Ä‘a 2/ngÃ y)</h2>
        <input id="coupleInput" placeholder="TÃªn cáº·p Ä‘Ã´i">
        <button onclick="addCouple()">Gá»­i</button>
    </div>

    <!-- DANH SÃCH -->
    <div class="section">
        <h2>ğŸ—³ï¸ BÃ¬nh chá»n</h2>
        <div id="coupleList"></div>
    </div>

    <!-- TOP -->
    <div class="section">
        <h2>ğŸ† Top há»£p Ä‘Ã´i</h2>
        <div id="topList"></div>
    </div>

    <!-- LÃŒ XÃŒ -->
    <div id="lixiLink" onclick="openLixi()">
        ğŸ§§ Má» LÃŒ XÃŒ TIá»€N Äáº¦Y TAY ğŸ§§
    </div>
</div>

<script>
/* ====== BIáº¾N ====== */
const CODE = "anhmontongtai";
let currentUser = "";

/* ====== LOGIN ====== */
function login(){
    const name = nameInput.value.trim();
    const code = codeInput.value.trim();

    if(name === "" || code === ""){
        alert("Nháº­p Ä‘áº§y Ä‘á»§ tÃªn vÃ  code!");
        return;
    }

    if(code !== CODE){
        alert("Sai code!");
        return;
    }

    currentUser = name;
    localStorage.setItem("currentUser",name);

    loginBox.style.display="none";
    main.style.display="block";
    userName.innerText=name;

    renderCouples();
    renderTop();
}

/* ====== DATA ====== */
function getCouples(){
    return JSON.parse(localStorage.getItem("couples")||"[]");
}

function saveCouples(data){
    localStorage.setItem("couples",JSON.stringify(data));
}

/* ====== Äá»€ XUáº¤T ====== */
function addCouple(){
    let couples = getCouples();
    let today = new Date().toDateString();

    let countToday = couples.filter(c=>c.user===currentUser && c.date===today).length;
    if(countToday>=2){
        alert("Má»—i ngÃ y chá»‰ Ä‘Æ°á»£c Ä‘á» xuáº¥t 2 cáº·p!");
        return;
    }

    couples.push({
        name:coupleInput.value,
        votes:0,
        voters:[],
        user:currentUser,
        date:today
    });

    saveCouples(couples);
    coupleInput.value="";
    renderCouples();
}

/* ====== VOTE ====== */
function vote(index){
    let couples = getCouples();
    let c = couples[index];

    if(c.voters.includes(currentUser)){
        alert("Báº¡n Ä‘Ã£ vote cáº·p nÃ y rá»“i!");
        return;
    }

    c.votes++;
    c.voters.push(currentUser);
    saveCouples(couples);
    renderCouples();
    renderTop();
}

/* ====== HIá»‚N THá»Š ====== */
function renderCouples(){
    let couples = getCouples();
    coupleList.innerHTML="";

    couples.forEach((c,i)=>{
        coupleList.innerHTML+=`
        <div class="couple">
            <b>${c.name}</b><br>
            â¤ï¸ ${c.votes} vote<br>
            <button onclick="vote(${i})">Vote</button>
        </div>`;
    });
}

/* ====== TOP ====== */
function renderTop(){
    let couples = getCouples().sort((a,b)=>b.votes-a.votes);
    topList.innerHTML="";

    if(couples[0]) topList.innerHTML+=`<div class="rank1">ğŸ¥‡ SiÃªu há»£p Ä‘Ã´i: ${couples[0].name}</div>`;
    if(couples[1]) topList.innerHTML+=`<div class="rank2">ğŸ¥ˆ Ráº¥t há»£p Ä‘Ã´i: ${couples[1].name}</div>`;
    if(couples[2]) topList.innerHTML+=`<div class="rank3">ğŸ¥‰ KhÃ¡ há»£p Ä‘Ã´i: ${couples[2].name}</div>`;
}

/* ====== LÃŒ XÃŒ ====== */
function openLixi(){
    window.open("lixi.html","_blank");
}
</script>

</body>
</html>
