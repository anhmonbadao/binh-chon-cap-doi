<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Táº¿t LÃ¬ XÃ¬ ğŸ’–</title>
<style>
body{margin:0;font-family:Arial;background:#b30000;color:#fff}
.container{max-width:1100px;margin:auto;padding:20px}
h1,h2{text-align:center}
.box{background:rgba(0,0,0,.35);padding:15px;border-radius:12px;margin:15px 0}
input,button{width:100%;padding:10px;border-radius:8px;border:none;margin:5px 0}
button{background:gold;font-weight:bold;cursor:pointer}
button:disabled{background:#555}
a{color:#00ccff;font-weight:bold;text-decoration:none}
.couple{background:#7a0000;padding:8px;border-radius:8px;margin:6px 0}
.rank1{color:gold}
.rank2{color:silver}
.rank3{color:#ffb347}
.coin{color:gold;font-weight:bold}
.small{font-size:14px;color:#eee}
.flex{display:flex;gap:20px}
.flex>div{flex:1}
</style>
</head>
<body>

<div id="lock" class="container">
  <iframe width="100%" height="250"
    src="https://www.youtube.com/embed/0N46LMV7UDU?autoplay=1&mute=1&loop=1"
    allow="autoplay"></iframe>
  <h2>Nháº­p code Ä‘á»ƒ vÃ o ğŸŠ</h2>
  <p class="small">Code: <b>anhmontongtai</b></p>
  <input id="nameInput" placeholder="Nháº­p tÃªn">
  <input id="codeInput" placeholder="Nháº­p code">
  <button onclick="unlock()">VÃ o web</button>
</div>

<div id="main" style="display:none" class="container">
<h1>ğŸ§§ BÃŒNH CHá»ŒN Cáº¶P ÄÃ”I + LÃŒ XÃŒ ğŸ§§</h1>

<div class="box">
ğŸ‘¤ <b id="player"></b> | ğŸ’° Coin: <span id="coin" class="coin">0</span>
</div>

<div class="box">
<h2>ğŸ§® Mini game</h2>
<p id="q"></p>
<input id="ans">
<button onclick="check()">Tráº£ lá»i</button>
</div>

<div class="box">
<h2>â• Äá» xuáº¥t cáº·p Ä‘Ã´i (2/ngÃ y)</h2>
<input id="coupleInput" placeholder="TÃªn cáº·p Ä‘Ã´i">
<button onclick="addCouple()">ThÃªm</button>
<p id="limit"></p>
</div>

<div class="box">
<h2>ğŸ“‹ Danh sÃ¡ch cáº·p Ä‘Ã´i</h2>
<div id="list"></div>
</div>

<div class="box">
<h2>ğŸ† Top cáº·p Ä‘Ã´i</h2>
<div id="topCouple"></div>
</div>

<div class="box">
<h2>ğŸ† Top lÃ¬ xÃ¬ coin</h2>
<div id="topCoin"></div>
</div>

</div>

<script>
const CODE="anhmontongtai";
const today=new Date().toDateString();

let user=JSON.parse(localStorage.getItem("user")||"null");
let couples=JSON.parse(localStorage.getItem("couples")||"[]");
let users=JSON.parse(localStorage.getItem("users")||"[]");

if(!user||user.date!==today){
  user={name:"",coin:user?user.coin:0,votes:{},posts:0,date:today};
}

function unlock(){
  if(codeInput.value!==CODE||!nameInput.value) return alert("Sai!");
  user.name=nameInput.value;
  localStorage.setItem("user",JSON.stringify(user));
  lock.style.display="none";
  main.style.display="block";
  player.innerText=user.name;
  update();
  newQ();
}

function update(){
  coin.innerText=user.coin;
  limit.innerText=`ÄÃ£ Ä‘Äƒng ${user.posts}/2 cáº·p hÃ´m nay`;
  renderCouple();
  renderTop();
  save();
}

function save(){
  localStorage.setItem("user",JSON.stringify(user));
  let u=users.find(x=>x.name===user.name);
  if(!u){users.push({name:user.name,coin:user.coin});}
  else u.coin=user.coin;
  localStorage.setItem("users",JSON.stringify(users));
  localStorage.setItem("couples",JSON.stringify(couples));
}

let a,b,ans;
function newQ(){
  a=Math.floor(Math.random()*10);
  b=Math.floor(Math.random()*10);
  ans=a+b;
  q.innerText=`${a} + ${b} = ?`;
}
function check(){
  if(+ansInput?.value===ans){user.coin++;update();}
  ans.value="";newQ();
}

function addCouple(){
  if(user.posts>=2) return alert("Háº¿t lÆ°á»£t hÃ´m nay!");
  if(!coupleInput.value) return;
  couples.push({name:coupleInput.value,votes:0});
  user.posts++;
  coupleInput.value="";
  update();
}

function vote(i){
  if(user.votes[i]) return;
  couples[i].votes++;
  user.votes[i]=true;
  update();
}

function renderCouple(){
  list.innerHTML="";
  couples.forEach((c,i)=>{
    list.innerHTML+=`<div class="couple">
    ${c.name} â¤ï¸ ${c.votes}<br>
    <button ${user.votes[i]?"disabled":""} onclick="vote(${i})">
    ${user.votes[i]?"ÄÃ£ vote":"Vote"}
    </button></div>`;
  });
}

function renderTop(){
  topCouple.innerHTML="";
  couples.filter(c=>c.votes>0)
    .sort((a,b)=>b.votes-a.votes)
    .slice(0,3)
    .forEach((c,i)=>{
      topCouple.innerHTML+=
      `<div class="couple rank${i+1}">
      ${["ğŸ¥‡ SiÃªu há»£p Ä‘Ã´i","ğŸ¥ˆ Ráº¥t há»£p Ä‘Ã´i","ğŸ¥‰ KhÃ¡ há»£p Ä‘Ã´i"][i]}<br>
      ${c.name} â€“ ${c.votes} â¤ï¸</div>`;
    });

  topCoin.innerHTML="";
  users.sort((a,b)=>b.coin-a.coin).slice(0,5)
    .forEach(u=>{
      topCoin.innerHTML+=`<div class="couple">${u.name} â€“ ğŸ’° ${u.coin}</div>`;
    });
}
</script>

</body>
</html>
