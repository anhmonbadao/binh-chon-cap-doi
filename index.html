<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Táº¿t BÃ¬nh Chá»n Cáº·p ÄÃ´i ğŸ§§</title>

<style>
body{
    margin:0;
    font-family:Arial, sans-serif;
    background:linear-gradient(#b30000,#ff0000);
    color:white;
    text-align:center;
}

h1,h2,h3{margin:10px 0}

input,button{
    padding:10px;
    border-radius:8px;
    border:none;
    margin:5px;
}

button{
    background:gold;
    font-weight:bold;
    cursor:pointer;
}

.section{
    background:rgba(0,0,0,0.25);
    margin:15px;
    padding:15px;
    border-radius:15px;
}

/* LOGIN */
#login{
    min-height:100vh;
    display:flex;
    flex-direction:column;
    justify-content:center;
    align-items:center;
}

/* VIDEO */
iframe{
    width:90%;
    max-width:560px;
    height:315px;
    border-radius:12px;
    margin:10px 0;
}

/* MAIN */
#main{display:none}

/* COUPLE */
.couple{
    background:rgba(255,255,255,0.15);
    padding:10px;
    border-radius:10px;
    margin:8px;
}

/* TOP */
.rank1{color:gold}
.rank2{color:silver}
.rank3{color:#cd7f32}

/* LÃŒ XÃŒ */
#lixiBox{
    margin-top:30px;
}

#lixi{
    font-size:80px;
    cursor:pointer;
    display:none;
}

#timer{
    font-size:22px;
    margin:10px;
}

/* Báº¢NG TRÃšNG */
#winners{
    background:rgba(0,0,0,0.3);
    margin:10px;
    padding:10px;
    border-radius:10px;
}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
    <h1>ğŸ§§ Táº¾T BÃŒNH CHá»ŒN Cáº¶P ÄÃ”I ğŸ§§</h1>

    <iframe src="https://www.youtube.com/embed/nAP-Jk7fgHM"></iframe>

    <input id="nameInput" placeholder="Nháº­p tÃªn cá»§a báº¡n">
    <input id="codeInput" placeholder="Nháº­p code">
    <p>Code: <b>anhmontongtai</b></p>

    <button onclick="enter()">VÃ o trang</button>
</div>

<!-- MAIN -->
<div id="main">
    <h1>ğŸŒ¸ Xin chÃ o <span id="user"></span> ğŸŒ¸</h1>

    <!-- Äá»€ XUáº¤T -->
    <div class="section">
        <h2>ğŸ’ Äá» xuáº¥t cáº·p Ä‘Ã´i (2/ngÃ y)</h2>
        <input id="coupleInput" placeholder="TÃªn cáº·p Ä‘Ã´i">
        <button onclick="addCouple()">Gá»­i</button>
    </div>

    <!-- DANH SÃCH -->
    <div class="section">
        <h2>ğŸ“œ Danh sÃ¡ch cáº·p Ä‘Ã´i</h2>
        <div id="list"></div>
    </div>

    <!-- TOP -->
    <div class="section">
        <h2>ğŸ† Top há»£p Ä‘Ã´i</h2>
        <div id="top"></div>
    </div>

    <!-- LÃŒ XÃŒ -->
    <div id="lixiBox" class="section">
        <h2 style="color:white">ğŸ§§ Má» LÃŒ XÃŒ TIá»€N Äáº¦Y TAY ğŸ§§</h2>
        <div id="timer"></div>
        <div id="lixi" onclick="openLixi()">ğŸ§§</div>

        <div id="winners">
            <h3>ğŸ‰ Ä‚n trá»n lÃ¬ xÃ¬</h3>
            <div id="winnerList"></div>
        </div>
    </div>
</div>

<script>
const CODE="anhmontongtai";
let userName="";
let opened=false;

/* LOGIN */
function enter(){
    if(nameInput.value==""||codeInput.value==""){
        alert("Nháº­p Ä‘á»§ tÃªn vÃ  code!");
        return;
    }
    if(codeInput.value!==CODE){
        alert("Sai code!");
        return;
    }
    userName=nameInput.value;
    login.style.display="none";
    main.style.display="block";
    user.innerText=userName;
    render();
    startTimer();
}

/* DATA */
function getCouples(){
    return JSON.parse(localStorage.getItem("couples")||"[]");
}
function saveCouples(d){
    localStorage.setItem("couples",JSON.stringify(d));
}

/* ADD COUPLE */
function addCouple(){
    let d=getCouples();
    let today=new Date().toDateString();
    let count=d.filter(x=>x.user===userName && x.date===today).length;
    if(count>=2){
        alert("Má»—i ngÃ y chá»‰ Ä‘Æ°á»£c 2 cáº·p!");
        return;
    }
    d.push({name:coupleInput.value,user:userName,date:today});
    saveCouples(d);
    coupleInput.value="";
    render();
}

/* RENDER */
function render(){
    let d=getCouples();
    list.innerHTML="";
    d.forEach(c=>{
        list.innerHTML+=`<div class="couple">${c.name}</div>`;
    });

    let map={};
    d.forEach(c=>map[c.name]=(map[c.name]||0)+1);
    let sorted=Object.entries(map).sort((a,b)=>b[1]-a[1]);
    top.innerHTML="";
    if(sorted[0])top.innerHTML+=`<div class="rank1">ğŸ¥‡ ${sorted[0][0]}</div>`;
    if(sorted[1])top.innerHTML+=`<div class="rank2">ğŸ¥ˆ ${sorted[1][0]}</div>`;
    if(sorted[2])top.innerHTML+=`<div class="rank3">ğŸ¥‰ ${sorted[2][0]}</div>`;
}

/* LÃŒ XÃŒ TIMER */
let time=3600;
function startTimer(){
    setInterval(()=>{
        if(time>0){
            time--;
            timer.innerText="â³ "+time+" giÃ¢y";
            if(time===0){
                lixi.style.display="block";
            }
        }
    },1000);
}

/* OPEN LÃŒ XÃŒ */
function openLixi(){
    if(opened)return;
    opened=true;
    let r=Math.random()*100;
    let money="KhÃ´ng trÃºng";
    if(r<20)money="1.000Ä‘";
    else if(r<30)money="5.000Ä‘";
    else if(r<39)money="10.000Ä‘";
    else if(r<40)money="50.000Ä‘";

    winnerList.innerHTML+=`<div>${userName}: ${money}</div>`;
    lixi.innerText="ğŸ‰";
}
</script>

</body>
</html>
