<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BÃ¬nh chá»n cáº·p Ä‘Ã´i â€“ LÃ¬ xÃ¬ Táº¿t</title>
  <style>
    body{margin:0;font-family:Arial;background:#b30000;color:#fff}
    .center{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:100vh}
    input,button{padding:10px;margin:5px;border-radius:6px;border:none}
    button{cursor:pointer}
    .hidden{display:none}
    .card{background:#fff;color:#000;padding:15px;border-radius:10px;margin:10px;width:90%;max-width:500px}
    a{color:#00ccff;font-weight:bold}
  </style>
</head>
<body>

<!-- LOGIN -->
<div id="login" class="center">
  <iframe width="320" height="180" src="https://www.youtube.com/embed/0N46LMV7UDU?autoplay=1&mute=1" allow="autoplay"></iframe>
  <h2>Nháº­p code Ä‘á»ƒ vÃ o</h2>
  <input id="codeInput" placeholder="Nháº­p code" />
  <div style="color:#00ccff">code: anhmontongtai</div>
  <input id="nameInput" placeholder="Nháº­p tÃªn cá»§a báº¡n" />
  <button onclick="enterSite()">VÃ o</button>
</div>

<!-- MAIN -->
<div id="main" class="hidden">
  <h1 style="text-align:center">ğŸ‰ BÃ¬nh chá»n cáº·p Ä‘Ã´i â€“ LÃ¬ xÃ¬ coin ğŸ‰</h1>

  <div class="card">
    <h3>â• Äá» xuáº¥t cáº·p Ä‘Ã´i (tá»‘i Ä‘a 2 / ngÃ y)</h3>
    <input id="coupleInput" placeholder="TÃªn cáº·p Ä‘Ã´i" />
    <button onclick="addCouple()">Gá»­i</button>
  </div>

  <div class="card">
    <h3>â¤ï¸ Danh sÃ¡ch cáº·p Ä‘Ã´i</h3>
    <div id="coupleList"></div>
  </div>

  <div class="card">
    <h3>ğŸ† TOP Há»¢P ÄÃ”I</h3>
    <ol id="topCouple"></ol>
  </div>

  <div class="card">
    <h3>ğŸ§§ LÃ¬ xÃ¬ coin cá»§a báº¡n: <span id="coin">0</span></h3>
    <button onclick="openSmallLucky()">Äá»•i 20 coin â†’ Bao lÃ¬ xÃ¬ nhá»</button>
  </div>

  <div class="card">
    <h3>ğŸ® Mini game toÃ¡n</h3>
    <div id="question"></div>
    <input id="answer" />
    <button onclick="checkAnswer()">Tráº£ lá»i</button>
    <div>HÃ´m nay kiáº¿m tá»‘i Ä‘a 100 coin</div>
  </div>

  <div style="text-align:center;margin:20px">
    <a href="lucky.html">má»Ÿ lÃ¬ xÃ¬ tiá»n Ä‘áº§y tayğŸ§§</a>
  </div>
</div>

<script>
const CODE='anhmontongtai';
let user='';
let coin=Number(localStorage.getItem('coin')||0);
let couples=JSON.parse(localStorage.getItem('couples')||'[]');
let dailyCount=Number(localStorage.getItem('dailyCount')||0);
let dailyCoin=Number(localStorage.getItem('dailyCoin')||0);
let qA=genQ();

function enterSite(){
  if(codeInput.value!==CODE)return alert('Sai code');
  user=nameInput.value||'áº¨n danh';
  login.classList.add('hidden');
  main.classList.remove('hidden');
  update();
}

function addCouple(){
  if(dailyCount>=2)return alert('HÃ´m nay báº¡n Ä‘Ã£ gá»­i Ä‘á»§ 2 cáº·p');
  if(!coupleInput.value)return;
  couples.push({name:coupleInput.value,vote:0});
  dailyCount++;
  save();update();
}

function vote(i){
  couples[i].vote++;
  save();update();
}

function update(){
  coinSpan=coin;
  document.getElementById('coin').innerText=coin;
  coupleList.innerHTML='';
  couples.forEach((c,i)=>{
    coupleList.innerHTML+=`<div>${c.name} â€“ â¤ï¸ ${c.vote} <button onclick="vote(${i})">Vote</button></div>`;
  });
  let sorted=[...couples].sort((a,b)=>b.vote-a.vote).slice(0,3);
  topCouple.innerHTML='';
  sorted.forEach(c=>topCouple.innerHTML+=`<li>${c.name} (${c.vote})</li>`);
}

function genQ(){
  let a=Math.floor(Math.random()*10),b=Math.floor(Math.random()*10);
  question.innerText=`${a}+${b} = ?`;
  return a+b;
}

function checkAnswer(){
  if(dailyCoin>=100)return alert('HÃ´m nay Ä‘Ã£ Ä‘áº¡t max coin');
  if(Number(answer.value)==qA){
    coin++;dailyCoin++;qA=genQ();answer.value='';save();update();
  }
}

function openSmallLucky(){
  if(coin<20)return alert('KhÃ´ng Ä‘á»§ coin');
  coin-=20;
  let r=Math.random()*100;
  if(r<10)alert('ğŸ‰ TrÃºng 1.000Ä‘');
  else if(r<19.5)alert('ğŸ‰ TrÃºng 5.000Ä‘');
  else if(r<20)alert('ğŸ‰ TrÃºng 10.000Ä‘');
  else alert('ğŸ˜… ChÃºc may máº¯n láº§n sau');
  save();update();
}

function save(){
  localStorage.setItem('coin',coin);
  localStorage.setItem('couples',JSON.stringify(couples));
  localStorage.setItem('dailyCount',dailyCount);
  localStorage.setItem('dailyCoin',dailyCoin);
}
</script>
</body>
</html>
